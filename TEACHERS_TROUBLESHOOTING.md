# حل مشكلة عدم ظهور المدرسين

## المشكلة
أسماء المدرسين لا تظهر في قائمة اختيار المدرس عند إنشاء مجموعة جديدة.

## الأسباب المحتملة والحلول

### 1. عدم وجود مدرسين في قاعدة البيانات

**التحقق:**
```sql
SELECT COUNT(*) FROM teachers;
SELECT id, name, email, is_active FROM teachers;
```

**الحل:**
- إضافة مدرسين إلى قاعدة البيانات
- التأكد من أن `is_active = true`

### 2. خطأ في استعلام جلب المدرسين

**التحقق:**
- فتح Developer Tools في المتصفح
- الذهاب إلى Console
- البحث عن رسائل الخطأ

**الحل:**
- تحديث `fetchTeachers` في `ManageGroupsModal.tsx`
- التأكد من صحة استعلام Supabase

### 3. مشكلة في RLS (Row Level Security)

**التحقق:**
```sql
-- التحقق من سياسات RLS
SELECT * FROM pg_policies WHERE tablename = 'teachers';
```

**الحل:**
- التأكد من أن المستخدم الحالي لديه صلاحية قراءة جدول `teachers`
- إضافة سياسة RLS مناسبة

### 4. مشكلة في الاتصال بقاعدة البيانات

**التحقق:**
- التأكد من صحة `SUPABASE_URL` و `SUPABASE_ANON_KEY`
- فحص اتصال الإنترنت

**الحل:**
- تحديث متغيرات البيئة
- إعادة تشغيل التطبيق

## خطوات التشخيص

### الخطوة 1: التحقق من قاعدة البيانات
```bash
# تشغيل ملف التشخيص
node debug-teachers.js
```

### الخطوة 2: فحص Console المتصفح
1. فتح Developer Tools (F12)
2. الذهاب إلى Console
3. البحث عن رسائل الخطأ أو "Teachers loaded:"

### الخطوة 3: التحقق من Network Tab
1. فتح Developer Tools
2. الذهاب إلى Network
3. فتح نافذة إدارة المجموعات
4. البحث عن استعلامات Supabase

### الخطوة 4: إضافة مدرسين تجريبيين
```sql
INSERT INTO teachers (id, name, email, is_active, created_at, updated_at)
VALUES 
  (gen_random_uuid(), 'أحمد محمد', 'ahmed@example.com', true, now(), now()),
  (gen_random_uuid(), 'فاطمة علي', 'fatima@example.com', true, now(), now());
```

## التحسينات المضافة

### 1. تحسين معالجة الأخطاء
- إضافة رسائل خطأ واضحة
- عرض عدد المدرسين المتاحين
- إضافة معلومات التصحيح

### 2. تحسين واجهة المستخدم
- عرض حالة التحميل
- إظهار رسائل عندما لا توجد مدرسين
- إضافة معلومات إضافية عن كل مدرس

### 3. تحسين الاستعلام
- جلب المدرسين النشطين فقط
- إضافة ترتيب حسب الاسم
- تحسين الأداء

## اختبار الحل

1. **إضافة مدرسين إلى قاعدة البيانات**
2. **إعادة تشغيل التطبيق**
3. **فتح نافذة إدارة المجموعات**
4. **النقر على "إضافة مجموعة"**
5. **التحقق من ظهور قائمة المدرسين**

## إذا استمرت المشكلة

1. **فحص سجلات Supabase**
2. **التأكد من إعدادات المشروع**
3. **مراجعة سياسات RLS**
4. **التواصل مع دعم Supabase** 